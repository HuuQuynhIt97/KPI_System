<div class="row">
  <div class="col-12">
    <h4>Type: Integer / Percentage / Decimal</h4>

    <table class="table table-bordered" style="margin-bottom:20px;" >
      <tbody style="box-shadow:  0 0 7px;">
        <ng-container *ngFor="let item of dataDefault; let i=index">
          <tr style="background-color: #f0f3f5;">
            <th  class="text-center" width="30%">{{"KPI_SELF_SCORE_LABEL" | translate}}</th>
            <th  class="text-center" width="5%">{{"meetingMonth" | translate}}</th>
            <th *ngFor="let item_label of item.labels; let i=index" class="text-center">
              {{item_label}}
            </th>
          </tr>

          <tr>
            <th style="vertical-align: middle;" rowspan="2" class="text-left" width="5%">
              {{item.name}}
            </th>
            <th  class="text-center" width="5%">
              {{"meetingTarget" | translate}}
            </th>
            <td *ngFor="let item_target of item.targets; let i=index" class="text-center" >
              <ng-container *ngIf="item.typeId === 1; else elseTemplate">
                {{item_target}} %
              </ng-container>
              <ng-template #elseTemplate>
                {{item_target}}
              </ng-template>
            </td>

          </tr>

          <tr>
            <th class="text-center" width="5%">
              {{"meetingPer" | translate}}
            </th>
            <td *ngFor="let item_per of item.perfomances; let i=index" class="text-center" >

              <ng-container *ngIf="item.typeId === 1; else elseTemplate">
                {{item_per}} %
              </ng-container>
              <ng-template #elseTemplate>
                {{item_per}}
              </ng-template>
            </td>
          </tr>
        </ng-container>

      </tbody>
    </table>

    <h4>Type: Text</h4>

    <table class="table table-bordered " style="box-shadow:  0 0 20px; border-radius: 5px; overflow: hidden;">
      <ng-container *ngFor="let item of dataString; let i= index;">
        <thead>
          <tr>
            <th rowspan="2" scope="col" class="text-center" style="vertical-align: middle ;background-color: #bbbbbb6b;">{{"KPI_LABEL_SELF_SCORE" | translate}}</th>
            <th rowspan="2" scope="col" class="text-center" style="vertical-align: middle ;background-color: #bbbbbb6b;">{{"PLAN_LABEL_SELF_SCORE" | translate}}</th>
            <th rowspan="2" scope="col" class="text-center" style="vertical-align: middle;background-color: #bbbbbb6b;">{{"TARGET_LABEL_SELF_SCORE" | translate}}</th>
            <ng-container *ngIf="i === 0; else elseTemplate">
              <th scope="col" colspan="6" style="vertical-align: middle ;background-color: #bbbbbb6b;" class="text-center">{{"PERF_LABEL_SELF_SCORE" | translate}}</th>
            </ng-container>
            <ng-template #elseTemplate>

            </ng-template>
          </tr>
          <tr >
            <th *ngFor="let item_label of item.labels; let x=index" style="vertical-align: middle;background-color: #bbbbbb6b;" class="text-center" > {{item_label}} </th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let items of item.data; let x= index;">
            <tr >
              <th [attr.rowspan]="item.data.length" *ngIf="x == 0" style="vertical-align: text-top ">
                {{item.name}}
              </th>
              <td style="vertical-align: text-top;" class="border" >
                {{items.content}}
              </td>
              <td style="vertical-align: text-top;" >{{items.target}}</td>

              <ng-container *ngFor="let item_perl of items.item; let i=index">
                <td class="text-center"> {{item_perl}}</td>
              </ng-container>
            </tr>
          </ng-container>
        </tbody>
      </ng-container>
    </table>
  </div>

  <div class="modal-footer" style="color: transparent;">
  </div>

  <!-- L0 -->
  <div class="col-12">
    <table class="table table-bordered" style="margin-bottom:20px;" >
      <tbody style="box-shadow:  0 0 7px;">
        <tr style="background-color: #f0f3f5;">
          <th  class="text-center" style="background-color: #bbbbbb6b;" width="5%">{{"L0_SELF_SCORE_LABEL" | translate}}</th>
          <th  class="text-center" style="background-color: #bbbbbb6b;" width="30%">{{"L0_KPI_COMMENT_SELF_SCORE_LABEL" | translate}}</th>
        </tr>

        <tr>
          <td style="vertical-align: middle;" class="text-center" >
            <span>{{point}}</span>
            <!-- <ejs-dropdownlist id='ddlelement' #ddlelement [(ngModel)]='point'  [allowFiltering]='true'  [fields]="pointFields" placeholder='Select a Point' [dataSource]='pointData'></ejs-dropdownlist> -->
          </td>
          <td  class="text-center" >
            <textarea class="form-control" style="border-color: darkseagreen;" disabled [(ngModel)]="comment"  rows="4"></textarea>
          </td>
        </tr>

      </tbody>
    </table>
  </div>

  <div class="modal-footer" style="color: transparent;">
  </div>

  <!-- KPI Score ref. table -->
  <div class="col-12">
    <div class="container">
      <h4 style="text-align: center;">KPI Score ref. table</h4>
      <div class="row">
        <div class="col">
          <a href="javascript:void(0)" (click)="getPoint(4.5,5)" style="cursor: pointer; color: #20a8d8; background-color: transparent;">
            <div class="card" style="background-color: #76d576; color: black;">
              <div class="card-body text-center" >
                <h5 class="card-title">5 >= X >= 4.5</h5>
                <p class="card-text">{{"SCORE_REF_BTN_5_ZH" | translate}}</p>
                <p class="card-text">{{"SCORE_REF_BTN_5_EN" | translate}}</p>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="javascript:void(0)" (click)="getPoint(4,4.4)" style="cursor: pointer; color: #20a8d8; background-color: transparent;">
            <div class="card" style="background-color: yellowgreen; color: black;">
              <div class="card-body text-center">
                <h5 class="card-title">4.5 > X >= 4</h5>
                <p class="card-text">{{"SCORE_REF_BTN_4.5_ZH" | translate}}</p>
                <p class="card-text">{{"SCORE_REF_BTN_4.5_EN" | translate}}</p>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="javascript:void(0)" (click)="getPoint(3,3.9)" style="cursor: pointer; color: #20a8d8; background-color: transparent;">
            <div class="card" style="background-color: yellow; color: black;">
              <div class="card-body text-center">
                <h5 class="card-title">4 > X >= 3</h5>
                <p class="card-text">{{"SCORE_REF_BTN_4_ZH" | translate}}</p>
                <p class="card-text">{{"SCORE_REF_BTN_4_EN" | translate}}</p>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="javascript:void(0)" (click)="getPoint(2,2.9)" style="cursor: pointer; color: #20a8d8; background-color: transparent;">
            <div class="card" style="background-color: orange; color: black;">
              <div class="card-body text-center">
                <h5 class="card-title">3 > X >= 2</h5>
                <p class="card-text">{{"SCORE_REF_BTN_3_ZH" | translate}}</p>
                <p class="card-text">{{"SCORE_REF_BTN_3_EN" | translate}}</p>
              </div>
            </div>
          </a>
        </div>
        <div class="col">
          <a href="javascript:void(0)" (click)="getPoint(0,1.9)" style="cursor: pointer; color: #20a8d8; background-color: transparent;">
            <div class="card" style="width: 111%; background-color: orangered;color: black;">
              <div class="card-body text-center">
                <h5 class="card-title">2 > X >= 0</h5>
                <p class="card-text">{{"SCORE_REF_BTN_2_ZH" | translate}}</p>
                <p class="card-text">{{"SCORE_REF_BTN_2_EN" | translate}}</p>
              </div>
            </div>
          </a>
        </div>
      </div>

      <h4 style="text-align: center;color: red;">Please select the button to get the point data </h4>
    </div>

  </div>

  <div class="modal-footer" style="color: transparent;">
  </div>

  <!-- L1 -->
  <div class="col-12">
    <table class="table table-bordered" style="margin-bottom:20px;" >
      <tbody style="box-shadow:  0 0 7px;">
        <tr style="background-color: #f0f3f5;">
          <th  class="text-center" style="background-color: #bbbbbb6b;" width="5%">{{"L1_SELF_SCORE_LABEL" | translate}}</th>
          <th  class="text-center" style="background-color: #bbbbbb6b;" width="30%">{{"L1_KPI_COMMENT_SELF_SCORE_LABEL" | translate}}</th>
        </tr>

        <tr>
          <td style="vertical-align: middle;" class="text-center" >
            <ejs-dropdownlist
              id='ddlelement'
              #ddlelement [(ngModel)]='pointl1'
              [allowFiltering]='true'
              [readonly]="isSubmit"
              [fields]="pointFields"
              placeholder="{{'PLACEHOLDER_SELECT_SCORE' | translate}}"
              [dataSource]='pointDataL1'>
            </ejs-dropdownlist>
          </td>
          <td  class="text-center" >
            <textarea class="form-control"
            [(ngModel)]="commentl1"
            style="border-color: darkseagreen;"
            [readonly]="isSubmit"
            placeholder="{{'PLACEHOLDER_KPI_COMMENT_LABEL' | translate}}" rows="4"></textarea>
          </td>
        </tr>

      </tbody>
    </table>
  </div>

  <div class="modal-footer" style="color: transparent;">
  </div>

  <!-- Special Contribution or Mistake -->
  <h4 style="text-align: left;color: red;">Special Contribution or Mistake: </h4>
  <div class="container">
    <button style="margin-right: 155px;" type="button" (click)="refresh()" class="btn btn-lg btn-primary float-right">
      <i class="fa fa-refresh" aria-hidden="true"></i>
      {{'RESET_BUTTON' | translate}}</button>
  </div>
  <div class="col-12">

    <div class="container">

      <div class="row mb-4">
        <div class="col">
          <div class="form-outline">
            <label class="form-label" >{{"KPI_SCORE_TYPE_LABEL" | translate}}</label>

            <ejs-multiselect
              id="ddlelementType"
              #ddlelementType
              [showDropDownIcon]="true"
              [(ngModel)]="typel1"
              (valueChange)="onChangeScoreType()"
              (change)="changeSpecialType($event)"
              [dataSource]="typeDataL1"
              placeholder="{{ 'CHOOSE TYPE' | translate }}"
              [fields]="typeFields"
              [readonly]="isSubmit"
              [mode]="'Box'"
            >
            </ejs-multiselect>
            <!-- <ejs-dropdownlist
              id='ddlelementType'
              #ddlelementType
              [enabled]='true'
              [(ngModel)]='typel1'
              [readonly]="isSubmit"
              [allowFiltering]='true'
              [fields]="typeFields"
              (select)="selected($event)"
              placeholder='Select a Type'
              [dataSource]='typeDataL1'>
            </ejs-dropdownlist> -->
          </div>
        </div>
        <div class="col">
          <div class="form-outline">
            <label class="form-label" >{{"KPI_SCORE_COMPACT_LABEL" | translate}}</label>

            <ejs-multiselect
              id="ddlelementImpact"
              #ddlelementImpact
              [showDropDownIcon]="true"
              [(ngModel)]="compactl1"
              [enabled]='false'
              [dataSource]="compactDataL1"
              [readonly]="isSubmit"
              placeholder="{{ 'CHOOSE IMPACT' | translate }}"
              [fields]="compactFields"
              [mode]="'Box'"
            >
            </ejs-multiselect>
            <!-- <ejs-dropdownlist
              id='ddlelementImpact' #ddlelementImpact
              [(ngModel)]='compactl1'
              [readonly]="isSubmit"
              [allowFiltering]='true'
              [fields]="compactFields"
              [enabled]='false'
              placeholder='Select a Impact'
              [dataSource]='compactDataL1'>
            </ejs-dropdownlist> -->
          </div>
        </div>
      </div>

      <div class="form-outline mb-4">
        <label class="form-label" >{{"KPI_SCORE_SUBJECT_LABEL" | translate}}</label>
        <textarea
          class="form-control"
          [readonly]="isSubmit"
          [(ngModel)]="subjectl1"
          style="border-color: darkseagreen;"
          placeholder="{{'KPI_SCORE_SUBJECT_LABEL' | translate}}"
          rows="4">
        </textarea>
      </div>

      <div class="form-outline mb-4">
        <label class="form-label" >{{"KPI_SCORE_CONTENT_LABEL" | translate}}</label>
        <textarea
          [readonly]="isSubmit"
          class="form-control"
          [(ngModel)]="contentl1"
          style="border-color: darkseagreen;"
          placeholder="{{'KPI_SCORE_CONTENT_LABEL' | translate}}"
          rows="4">
        </textarea>
      </div>

      <div class="row mb-4">
        <div class="col">
          <div class="form-outline">
            <label class="form-label" >{{"KPI_SCORE_RATIO_LABEL" | translate}}</label>
            <ejs-dropdownlist
              id='ddlelementRatio' #ddlelementRatio
              [(ngModel)]='ratiol1'
              [allowFiltering]='true'
              [readonly]="isSubmit"
              [fields]="ratioFields"
              [enabled]='false'
              placeholder='Select a Responsibility ratio'
              [dataSource]='ratioDataL1'>
            </ejs-dropdownlist>
          </div>
        </div>
        <div class="col">
          <div class="form-outline">
            <label class="form-label" >{{"KPI_SCORE_SCORE_LABEL" | translate}}</label>
            <ejs-dropdownlist
              id='ddlelementScore' #ddlelementScore
              [(ngModel)]='scorel1'
              [readonly]="isSubmit"
              [allowFiltering]='true'
              [enabled]='false'
              [fields]="scoreFields"
              placeholder='Select a Score'
              [dataSource]='scoreDataL1'>
            </ejs-dropdownlist>
          </div>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-12">
          <div class="control_wrapper">
            <ejs-uploader [allowedExtensions]='allowExtensions' [files]='files'
            (selected)='onSelected($event)'
            #defaultupload id='defaultfileupload'
            (failure)='beforeUpload($event)'
            [asyncSettings]='path'
            (success)='success($event)'
            [dropArea]='dropElement' (removing)='onFileRemove($event)'></ejs-uploader>
          </div>
        </div>
      </div>


    </div>
  </div>


  <div class="w-100">
    <button type="button" (click)="save(true)"  class="btn btn-lg btn-warning mr-2 float-right">{{'Submit' }}</button>
    <!-- <button type="button" (click)="save(false)" class="btn btn-lg btn-success mr-2 float-right">{{'Save' }}</button> -->
  </div>

  <div class="modal-footer" style="color: transparent;">
  </div>

</div>

<ng-template #message let-modal>
  <div class="modal-header text-center">
    <h2 class="modal-title w-100" style="font-size: 40px;">{{'MESSAGE_SUBMIT_PDCA_1'| translate}}</h2>
  </div>
  <div class="modal-body" style="max-height: 400px;">
    <h3>{{'MESSAGE_SUBMIT_PDCA_2'| translate}}</h3>
    <h3>{{'MESSAGE_SUBMIT_PDCA_3'| translate}}</h3>

    <div class="row justify-content-center">
      <button type="button" class="btn btn-success btn-lg" (click)="yesConfirm()" >{{'YES_CONFIRM_ALERTIFY'| translate}}</button>
      <span style="color: transparent;">|</span>
      <button  type="button" class="btn btn-secondary btn-lg" (click)="modal.close('Close click')" >{{'NO_CONFIRM_ALERTIFY'| translate}}</button>
    </div>
  </div>

</ng-template>
